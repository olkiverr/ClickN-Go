
<main class="section-container order-list-container">
    <h2 class="section-title">My Orders</h2>
    <% if (orders.length === 0) { %>
        <p>You have not placed any orders yet.</p>
        <a href="/products" class="btn-primary">Start Shopping</a>
    <% } else { %>
        <% orders.forEach(order => { %>
            <div class="order-card">
                <h3>Order #<%= order.id %></h3>
                <p><strong>Total Price:</strong> $<%= parseFloat(order.total_price).toFixed(2) %></p>
                <p><strong>Order Date:</strong> <%= new Date(order.created_at).toLocaleDateString() %></p>
                <p><strong>Shipping Address:</strong> <%= order.shipping_address %>, <%= order.shipping_city %>, <%= order.shipping_zip %>, <%= order.shipping_country %></p>
                <p><strong>Tracking Number:</strong> <%= order.tracking_number || 'N/A' %></p>
                <p><strong>Current Status:</strong> <%= order.shipping_status %></p>

                <div class="order-status-tracker">
                    <% const statuses = ['Pending', 'Shipped', 'Out for Delivery', 'Delivered']; %>
                    <% const currentStatusIndex = statuses.indexOf(order.shipping_status); %>
                    <div class="progress-line" style="width: <%= (currentStatusIndex / (statuses.length - 1)) * 100 %>%;"></div>
                    <% statuses.forEach((status, index) => { %>
                        <div class="status-step <%= index <= currentStatusIndex ? 'active' : '' %>">
                            <div class="status-dot"><%= index + 1 %></div>
                            <div class="status-text"><%= status %></div>
                        </div>
                    <% }) %>
                </div>
            </div>
        <% }) %>
    <% } %>
</main>
